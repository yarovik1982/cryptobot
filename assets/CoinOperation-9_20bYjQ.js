import{_ as I,B as E,A as j,q as P,r as b,x as V,h as Z,C as U,c as r,o as d,a as s,e as z,f as Q,z as m,t,i as C,n as l,F as X,g as W}from"./index-BvnaGof4.js";import{u as G}from"./useBalanceList-Ch2E4EM0.js";const J={class:"coin-operation"},K={class:"breadcrumbs mb-20"},Y={class:"min-h overflow-y-auto"},ss={class:"coin-header mb-10"},ts={class:"row items-center justify-between"},es={class:"col-auto"},os=["src","alt"],as={class:"col text-right"},ns={class:"coin-title"},is={class:"coin-symbol"},cs={class:"price-info mb-10"},ls={class:"card"},rs={class:"card-body"},ds={class:"row justify-between items-center"},us={class:"col text-right"},ps={class:"price-value"},hs={class:"row justify-between align-center mt-10"},bs={class:"col text-right"},ms={class:"operation-form"},vs={class:"card"},_s={class:"card-header"},ys={class:"card-body"},fs={class:"form-group mb-10"},gs={class:"form-label"},Ts={class:"address-container"},ws=["value","readonly","placeholder"],xs={class:"address-hint"},ks={key:0,class:"qr-section mb-10"},Cs={class:"qr-container"},Bs={class:"qr-code",ref:"qrCode"},As={class:"qr-placeholder"},Ds={class:"network-info mb-10"},Ss=["innerHTML"],$s={class:"min-amount mb-10"},qs={class:"info-box"},Ns={class:"info-content"},Rs={class:"action-buttons"},Ls={key:0,class:"transaction-history mt-10"},Fs={class:"card"},Hs={class:"card-header"},Ms={class:"card-body"},Os={class:"transactions-list"},Is={class:"row justify-between items-center"},Es={class:"col"},js={class:"tx-info"},Ps={class:"tx-hash"},Vs={class:"tx-date"},Zs={class:"col text-right"},Us={__name:"CoinOperation",props:{operationType:{type:String,required:!0,validator:n=>["deposit","withdraw"].includes(n)}},setup(n){const c=n,y=E(),f=j(),B=G(),u=b(""),p=b(!1),h=b([]),A=b(null),a=V(()=>{const o=parseInt(y.params.id);return B.renderDataById(o)||{}}),g=()=>{const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let e="";const _=a.value.symbol==="BTC"?"bc1q":"0x";for(let i=0;i<34;i++)e+=o.charAt(Math.floor(Math.random()*o.length));return _+e},D=async()=>{try{await navigator.clipboard.writeText(u.value),p.value=!0,setTimeout(()=>{p.value=!1},2e3)}catch(o){console.error("Failed to copy address:",o)}},T=()=>{u.value=g()},S=()=>{f.push(`/${c.operationType}`)},w=()=>({BTC:"Bitcoin",ETH:"Ethereum",USDT:"ERC-20",BNB:"BSC",SOL:"Solana",XRP:"Ripple",ADA:"Cardano",DOT:"Polkadot"})[a.value.symbol]||a.value.symbol,$=()=>({BTC:.001,ETH:.01,USDT:10,BNB:.1,SOL:.1,XRP:10,ADA:10,DOT:1})[a.value.symbol]||.1,x=()=>(Math.random()*10-5).toFixed(2),q=()=>parseFloat(x())>=0?"positive":"negative",N=o=>`${o.substring(0,8)}...${o.substring(o.length-8)}`,R=o=>new Date(o).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=o=>({completed:"Завершено",pending:"В обработке",failed:"Ошибка"})[o]||o,F=()=>c.operationType==="deposit"?"Пополнение":"Вывод",H=()=>c.operationType==="deposit"?"Назад к выбору монеты":"Назад к выводу",M=()=>c.operationType==="deposit"?`Отправьте ${a.value.symbol} на этот адрес`:`Укажите адрес для вывода ${a.value.symbol}`,v=()=>c.operationType==="deposit"?{icon:"bi-exclamation-triangle",type:"warning",text:`Отправляйте только ${a.value.symbol} по сети <span class="network-name">${w()}</span>. Отправка других активов приведет к их потере.`}:{icon:"bi-exclamation-circle",type:"info",text:`Убедитесь, что указали адрес в сети <span class="network-name">${w()}</span>. Вывод на адреса других сетей приведет к потере средств.`},k=()=>{c.operationType==="deposit"?h.value=[{id:1,hash:"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",amount:.5,date:"2024-01-15T14:30:00Z",status:"completed",type:"deposit"},{id:2,hash:"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",amount:1.2,date:"2024-01-14T10:15:00Z",status:"completed",type:"deposit"}]:h.value=[{id:1,hash:"0x9876543210fedcba9876543210fedcba9876543210fedcba9876543210fedcba",amount:.3,date:"2024-01-15T16:45:00Z",status:"completed",type:"withdraw"},{id:2,hash:"0xfedcba9876543210fedcba9876543210fedcba9876543210fedcba9876543210",amount:.8,date:"2024-01-14T12:20:00Z",status:"pending",type:"withdraw"}]},O=()=>c.operationType==="deposit"?"Последние пополнения":"Последние выводы";return P(()=>{u.value=g(),k(),a.value.id||f.push(`/${c.operationType}`)}),Z(()=>y.params.id,()=>{a.value.id&&(T(),k())}),(o,e)=>{const _=U("router-link");return d(),r("div",J,[s("div",K,[z(_,{to:`/${n.operationType}`,class:"breadcrumb-link"},{default:Q(()=>[e[0]||(e[0]=s("i",{class:"bi bi-arrow-left"},null,-1)),m(" "+t(H()),1)]),_:1},8,["to"])]),s("div",Y,[s("div",ss,[s("div",ts,[s("div",es,[s("img",{src:a.value.images?.x60,alt:a.value.name,class:"coin-icon-large"},null,8,os)]),s("div",as,[s("h1",ns,t(F())+" "+t(a.value.name),1),s("p",is,t(a.value.symbol),1)])])]),s("div",cs,[s("div",ls,[s("div",rs,[s("div",ds,[e[1]||(e[1]=s("div",{class:"col"},[s("span",{class:"label"},"Текущая цена:")],-1)),s("div",us,[s("span",ps," $"+t(parseFloat(a.value.price||0).toFixed(2)),1)])]),s("div",hs,[e[2]||(e[2]=s("div",{class:"col"},[s("span",{class:"label"},"Изменение за 24ч:")],-1)),s("div",bs,[s("span",{class:l(["price-change",q()])},t(x())+"% ",3)])])])])]),s("div",ms,[s("div",vs,[s("div",_s,[s("h2",null," Детали "+t(n.operationType==="deposit"?"пополнения":"вывода"),1)]),s("div",ys,[s("div",fs,[s("label",gs,t(n.operationType==="deposit"?"Адрес для пополнения":"Адрес для вывода"),1),s("div",Ts,[s("input",{type:"text",value:u.value,readonly:n.operationType==="deposit",placeholder:n.operationType==="withdraw"?"Введите адрес для вывода":"",class:"address-input",ref_key:"addressInput",ref:A},null,8,ws),s("button",{class:l(["copy-btn",{copied:p.value}]),onClick:D},[s("i",{class:l(["bi",p.value?"bi-check-lg":"bi-copy"])},null,2)],2)]),s("p",xs,t(M()),1)]),n.operationType==="deposit"?(d(),r("div",ks,[e[4]||(e[4]=s("label",{class:"form-label"},"QR-код",-1)),s("div",Cs,[s("div",Bs,[s("div",As,[e[3]||(e[3]=s("i",{class:"bi bi-qr-code"},null,-1)),s("p",null,"QR-код для "+t(a.value.symbol),1)])],512)])])):C("",!0),s("div",Ds,[s("div",{class:l(["info-box",v().type])},[s("i",{class:l(["bi",v().icon])},null,2),s("div",{class:"info-content",innerHTML:v().text},null,8,Ss)],2)]),s("div",$s,[s("div",qs,[e[5]||(e[5]=s("i",{class:"bi bi-info-circle"},null,-1)),s("div",Ns,[m(" Минимальная сумма "+t(n.operationType==="deposit"?"пополнения":"вывода")+": ",1),s("strong",null,t($())+" "+t(a.value.symbol),1)])])]),s("div",Rs,[s("button",{class:"btn btn-secondary",onClick:S},[...e[6]||(e[6]=[s("i",{class:"bi bi-arrow-left"},null,-1),m(" Назад ",-1)])]),s("button",{class:"btn btn-primary",onClick:T},[e[7]||(e[7]=s("i",{class:"bi bi-arrow-clockwise"},null,-1)),m(" "+t(n.operationType==="deposit"?"Обновить адрес":"Проверить адрес"),1)])])])])]),h.value.length>0?(d(),r("div",Ls,[s("div",Fs,[s("div",Hs,[s("h2",null,t(O()),1)]),s("div",Ms,[s("div",Os,[(d(!0),r(X,null,W(h.value,i=>(d(),r("div",{key:i.id,class:"transaction-item"},[s("div",Is,[s("div",Es,[s("div",js,[s("span",Ps,t(N(i.hash)),1),s("span",Vs,t(R(i.date)),1)])]),s("div",Zs,[s("span",{class:l(["tx-amount",i.status])},t(i.type==="deposit"?"+":"-")+t(i.amount)+" "+t(a.value.symbol),3),s("span",{class:l(["tx-status",i.status])},t(L(i.status)),3)])])]))),128))])])])])):C("",!0)])])}}},Xs=I(Us,[["__scopeId","data-v-cf9047a4"]]);export{Xs as C};
